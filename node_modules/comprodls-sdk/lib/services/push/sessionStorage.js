module.exports = (function () {
    var _sessionStorageKey = "ComproDLS.PubnubClientWrapper.Session";

    /**
     * Function to check if the session storage supported by browser.
     */
    var __isSessionStorageSupported = function() {
        return (typeof(Storage) !== "undefined");
    };

    /**
     * Function to store data in session storage
     */
    var __setData = function(data) {
        if (__isSessionStorageSupported()) { // Web storage supported by browser.
            sessionStorage.setItem(_sessionStorageKey,
                                               JSON.stringify(data));
            return { "error": false };
        } else {
            return { "error": true };
        }
    };

    /**
     * Function to get data from session storage
     */
    var __getData = function() {
        if (__isSessionStorageSupported()) { // Web storage supported by browser.
            var sessionStorageData = JSON.parse(sessionStorage.getItem(_sessionStorageKey));
            if(sessionStorageData) {
                return {
                    "error": false,
                    "data": sessionStorageData
                };
            } else {
                return {
                    "error": true,
                    "message": "No data found in browser sessionStorage."
                };
            }
        } else {
            return { "error": true };
        }
    };

    /**
     * Function to remove data from session storage
     */
    var __removeData = function() {
        if (__isSessionStorageSupported()) { // Web storage supported by browser.
            sessionStorage.removeItem(_sessionStorageKey);
            return { "error": false };
        } else {
            return { "error": true };
        }
    };

    return {
        "setData": __setData,
        "getData": __getData,
        "removeData": __removeData,
        "isSessionStorageSupported" : __isSessionStorageSupported
    };
}) ();
