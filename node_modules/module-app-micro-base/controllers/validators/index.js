/**
 * 
 * AJV doc - https://ajv.js.org/
 * CAUTION: Don't use precompiled AJV schema validator after asynchronous tasks
 * 
 * 
 */
const { ajv } = require("./ajv")

const gigyaControllerValidator = require("./gigya-controller.schema")

/**
 * validates object against a ajv schema
 * @param {*} schemaValidator compiled validatation for the model/schema
 * @param {*} data object to be validated
 */
function validate(schemaValidator, data) {
    const valid = schemaValidator(data)
    if (valid) return { valid: true }
    else return { valid: false, error: ajv.errorsText(schemaValidator.errors) }
}


module.exports = {
    validate,
    gigyaControllerValidator
}
  